# Interior Fall Fix
[English](README.md) | Русский

# Что это?

Данное включение позволяет исправить назойливую проблему, когда игрок после телепортации в интерьер из-за проблем с подключением проваливается под пол.
Скрипт телепортирует его обратно на место последней телепортации, если обнаружит, что игрок падает.

Для работы исправления достаточно просто подключить файл InteriorFallFix.inc в свой код.
Сделайте это после основных включений и перехватов анти-чита.
```pawn
#include <InteriorFallFix>
```

Видео демонстрации:
[![Watch the video](https://img.youtube.com/vi/-lnWa3OpdjA/maxresdefault.jpg)](https://youtu.be/-lnWa3OpdjA)

# Настройка
Во включении есть ряд определений, которые позволяют его настраивать.
Для того, чтобы изменить какое-то значение нужно определить его перед подключением включения, либо отредактировать его внутри включения.

Время, в течении которого после последней телепортации скрипт будет проверять падает ли игрок в миллисекундах:
```pawn
public OnGameModeInit()
{
    ifx_SetFixTime(7000);
    return 1;
}
```
Откуда брать информацию о том, в каком интеьере находится игрок:
```pawn
#define ifx_GetPlayerInterior(%0) GetPlayerInterior(%0)
```
Рекомендуется установить какую-нибудь свою функцию или переменную для грамотной работы с античитом во избежание несанкционированного перемещения между интерьерами.

Задержка между проверками скрипта в OnPlayerUpdate в миллисекундах:
```pawn
#define ifx_PlayerUpdateCD 250
```
Меньше - чаще проверки и ниже производительность.

Скорость падения игрока, необходимая для срабатывания скрипта:
```pawn
#define ifx_FallVelocity 0.3
```

stocks
```pawn
stock ifx_SetFixTime(time_ms)
stock ifx_GetFixTime()
```

# Примечание

Данное включение полностью не исправит проблему - это возможно лишь в случае, если вы используете его в комбинации с заморозкой игроков при телепортации, либо в ваших интерьерах установлены статические платформы (CreateObject).

Автор - timmylich. | [ВКонтакте](vk.com/timmylich) | [Telegram](t.me/timmylich)
